name: Upload to S3

on: 
  push:
    branches: [ "main" ]
    paths:
      - 'website/**'
    

jobs:
  upload:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Install Linters
        run: npm install -g htmlhint eslint@8 stylelint stylelint-config-standard 
      
      - name: Run HTMLHint
        run: htmlhint "website/*.html"
        
      - name: Run CSS Stylelint 
        run: stylelint "website/*.css"
        
      - name: Run JavaScript Lint
        run: eslint "website/*.js"

      - name: Configure AWS Credentials
        uses: aws-actions/configure-aws-credentials@e3dd6a429d7300a6a4c196c26e071d42e0343502
        with:
          role-to-assume: arn:aws:iam::963527046541:role/github-actions-update-s3-static-webiste
          role-session-name: githubactions
          aws-region: "us-east-1"
          
      - name: Verify AWS Credentials
        run: aws sts get-caller-identity
        
#      - uses: shallwefootball/s3-upload-action@latest
#        with:
#          aws_key_id: ${{ secrets.AWS_KEY_ID }}
#          aws_secret_access_key: ${{ secrets.AWS_SECRET_ACCESS_KEY}}
#          aws_bucket: ${{ secrets.AWS_BUCKET }}
#          source_dir: 'dirname'
